<!DOCTYPE html>

<html>
    <head>
    </head>
    
    <body>
        <audio src="https://proxy.podcrypt.app/https://freemusicarchive.org/file/music/none_given/TRG_Banks/TRG_Banks_-_Singles/TRG_Banks_-_Fergus_OReilly.mp3" crossorigin="anonymous" controls></audio>
        <button onclick="download()">Download</button>
        
        <script>
            async function download() {
                const audioElement = document.querySelector('audio');
                const audioContext = new AudioContext();
                const source = audioContext.createMediaElementSource(audioElement);
                const offlineAudioContext = new OfflineAudioContext();
            
                source.connect(offlineAudioContext.destination);
                source.start();
                
                offlineAudioContext.startRendering.then((buffer) => {
                    console.log('buffer', buffer);
                });
            }
            
        
        </script>
    </body>
</html>
